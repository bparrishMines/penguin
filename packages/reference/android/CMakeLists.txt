cmake_minimum_required(VERSION 3.6.0)  # for example
project(native_add)

enable_language(ASM)

# Set as required by ../third_party/dart-sdk/sources.cmake included below
set(DARTSDK_ROOT ../third_party/dart-sdk/)

# Import sources generated by tool/update-dart-sdk.py
# This provides variables, and requires DARTSDK_ROOT to be set.
#  - dart_dl_sources
include(
  ../third_party/dart-sdk/sources.cmake
)

add_library( native_add

             # Sets the library as a shared library.
             SHARED

             ${dart_dl_sources}
             # Provides a relative path to your source file(s).
             ../ios/Classes/native_add.cpp
)

target_include_directories(
  native_add

  PUBLIC

  ../third_party/dart-sdk/src/runtime/
)

find_library( # Defines the name of the path variable that stores the
              # location of the NDK library.
              log-lib

              # Specifies the name of the NDK library that
              # CMake needs to locate.
              log )

target_link_libraries( # Specifies the target library.
                       native_add

                       # Links the log library to the target library.
                       ${log-lib} )

